/* 
 Â© 2015 Nathan Rugg <nmrugg@gmail.com> | MIT
 https://github.com/nmrugg/LZMA-JS/blob/master/src/lzma.js
*/
window.LZMA = function(){function k(a){var b=[];b[a-1]=void 0;return b}function y(a,b){return z(a[0]+b[0],a[1]+b[1])}function v(a,b){var d,c;if(a[0]==b[0]&&a[1]==b[1])return 0;d=0>a[1];c=0>b[1];return d&&!c?-1:!d&&c?1:0>z(a[0]-b[0],a[1]-b[1])[1]?-1:1}function z(a,b){var d,c;b%=1.8446744073709552E19;a%=1.8446744073709552E19;d=b%4294967296;c=4294967296*Math.floor(a/4294967296);b=b-d+c;for(a=a-c+d;0>a;)a+=4294967296,b-=4294967296;for(;4294967295<a;)a-=4294967296,b+=4294967296;for(b%=1.8446744073709552E19;0x7fffffff00000000<
b;)b-=1.8446744073709552E19;for(;-9223372036854775808>b;)b+=1.8446744073709552E19;return[a,b]}function w(a){return 0<=a?[a,0]:[a+4294967296,-4294967296]}function A(a){return 2147483648<=a[0]?~~Math.max(Math.min(a[0]-4294967296,2147483647),-2147483648):~~Math.max(Math.min(a[0],2147483647),-2147483648)}function p(a){return a.ea>=a.count?-1:a.B[a.ea++]&255}function t(a){var b=a.f-a.A;if(b){for(var d=a.H,c=a.m,e=a.A,g=d.B,f=d.count,h=0;h<b;++h)g[f+h]=c[e+h];d.count+=b;a.f>=a.l&&(a.f=0);a.A=a.f}}function B(a,
b){var d=a.f-b-1;0>d&&(d+=a.l);return a.m[d]}function H(a){if(!a.I)throw Error("bad state");if(a.fa)throw Error("No encoding");var b;a:{b=a.i;var d,c,e,g;g=A(b.h)&b.ha;if(n(b.b,b.W,(b.state<<4)+g)){if(n(b.b,b.Y,b.state))d=0,n(b.b,b.Z,b.state)?(n(b.b,b.$,b.state)?(n(b.b,b.aa,b.state)?(c=b.S,b.S=b.w):c=b.w,b.w=b.v):c=b.v,b.v=b.a,b.a=c):n(b.b,b.X,(b.state<<4)+g)||(b.state=7>b.state?9:11,d=1),d||(d=C(b.R,b.b,g)+2,b.state=7>b.state?8:11);else if(b.S=b.w,b.w=b.v,b.v=b.a,d=2+C(b.K,b.b,g),b.state=7>b.state?
7:10,c=d-2,e=q(b.P[4>c?c:3],b.b),4<=e)if(c=(e>>1)-1,b.a=(2|e&1)<<c,14>e){g=b.a;var f=b.ca;e=b.a-e-1;var h=b.b,l,k,m=1,r=0;for(k=0;k<c;++k)l=n(h,f,e+m),m<<=1,m+=l,r|=l<<k;b.a=g+r}else{g=b.a;f=b.b;e=0;for(c-=4;0!=c;--c)f.Range>>>=1,h=f.c-f.Range>>>31,f.c-=f.Range&h-1,e=e<<1|1-h,f.Range&-16777216||(f.c=f.c<<8|p(f.o),f.Range<<=8);b.a=g+(e<<4);c=b.a;g=b.ba;f=b.b;l=1;for(h=k=0;h<g.G;++h)e=n(f,g.j,l),l<<=1,l+=e,k|=e<<h;b.a=c+k;if(0>b.a){b=-1==b.a?1:-1;break a}}else b.a=e;if(0<=v(w(b.a),b.h)||b.a>=b.U){b=
-1;break a}c=b.g;g=d;f=c.f-b.a-1;for(0>f&&(f+=c.l);0!=g;--g)f>=c.l&&(f=0),c.m[c.f++]=c.m[f++],c.f>=c.l&&t(c);b.h=y(b.h,w(d));b.F=B(b.g,0)}else{d=b.L;d=d.C[((A(b.h)&d.ga)<<d.u)+((b.F&255)>>>8-d.u)];if(7>b.state){c=b.b;g=1;do g=g<<1|n(c,d.D,g);while(256>g);d=g<<24>>24}else{c=b.b;g=B(b.g,b.a);h=1;do if(e=g>>7&1,g<<=1,f=n(c,d.D,(1+e<<8)+h),h=h<<1|f,e!=f){for(;256>h;)h=h<<1|n(c,d.D,h);break}while(256>h);d=h<<24>>24}b.F=d;d=b.g;c=b.F;d.m[d.f++]=c;d.f>=d.l&&t(d);d=b.state;b.state=4>d?0:10>d?d-3:d-6;b.h=
y(b.h,I)}b=0}if(-1==b)throw Error("corrupted input");a.ja=x;a.ka=a.i.h;if(b||0<=v(a.i.da,D)&&0<=v(a.i.h,a.i.da))t(a.i.g),b=a.i.g,t(b),b.H=null,a.i.b.o=null,a.I=0;return a.I}function E(a,b){for(;a.s<b;++a.s)a.M[a.s]=u(3),a.N[a.s]=u(3)}function C(a,b,d){if(!n(b,a.J,0))return q(a.M[d],b);var c=8;return c=n(b,a.J,1)?c+(8+q(a.V,b)):c+q(a.N[d],b)}function F(){var a={};a.J=k(2);a.M=k(16);a.N=k(16);a.V=u(8);a.s=0;return a}function G(a){m(a.J);for(var b=0;b<a.s;++b)m(a.M[b].j),m(a.N[b].j);m(a.V.j)}function u(a){var b=
{};b.G=a;b.j=k(1<<a);return b}function q(a,b){var d,c=1;for(d=a.G;0!=d;--d)c=(c<<1)+n(b,a.j,c);return c-(1<<a.G)}function n(a,b,d){var c,e=b[d];c=(a.Range>>>11)*e;if((a.c^-2147483648)<(c^-2147483648))return a.Range=c,b[d]=e+(2048-e>>>5)<<16>>16,a.Range&-16777216||(a.c=a.c<<8|p(a.o),a.Range<<=8),0;a.Range-=c;a.c-=c;b[d]=e-(e>>>5)<<16>>16;a.Range&-16777216||(a.c=a.c<<8|p(a.o),a.Range<<=8);return 1}function m(a){for(var b=a.length-1;0<=b;--b)a[b]=1024}var x=[4294967295,-4294967296],D=[0,0],I=[1,0];return{decompress:function(a){var b,
d={};d.B=k(32);d.count=0;var c={};c.B=a;c.ea=0;c.count=a.length;b="";var e,g=[],f;for(e=0;5>e;++e){f=p(c);if(-1==f)throw Error("truncated input");g[e]=f<<24>>24}a={g:{},b:{}};a.W=k(192);a.Y=k(12);a.Z=k(12);a.$=k(12);a.aa=k(12);a.X=k(192);a.P=k(4);a.ca=k(114);a.ba=u(4);a.K=F();a.R=F();a.L={};for(e=0;4>e;++e)a.P[e]=u(6);var h,l;if(5>g.length)e=0;else{l=g[0]&255;f=~~(l/9);for(h=e=0;4>h;++h)e+=(g[1+h]&255)<<8*h;if(!(g=99999999<e)){l%=9;h=f%5;g=~~(f/5);if(8<l||4<h||4<g)g=0;else{f=a.L;if(null==f.C||f.u!=
l||f.O!=h)for(f.O=h,f.ga=(1<<h)-1,f.u=l,h=1<<f.u+f.O,f.C=k(h),l=0;l<h;++l){var n=f.C,q=l,r={};r.D=k(768);n[q]=r}g=1<<g;E(a.K,g);E(a.R,g);a.ha=g-1;g=1}g=!g}if(g)e=0;else if(0>e)e=0;else{if(a.T!=e){a.T=e;a.U=Math.max(a.T,1);e=a.g;g=Math.max(a.U,4096);if(null==e.m||e.l!=g)e.m=k(g);e.l=g;e.f=0;e.A=0}e=1}}if(!e)throw Error("corrupted input");for(e=0;64>e;e+=8){f=p(c);if(-1==f)throw Error("truncated input");f=f.toString(16);1==f.length&&(f="0"+f);b=f+""+b}/^0+$|^f+$/i.test(b)?b=x:(b=parseInt(b,16),b=4294967295<
b?x:w(b));a.b.o=c;c=a.g;t(c);c.H=null;a.g.H=d;a.g.A=0;a.g.f=0;m(a.W);m(a.X);m(a.Y);m(a.Z);m(a.$);m(a.aa);m(a.ca);c=a.L;g=1<<c.u+c.O;for(e=0;e<g;++e)m(c.C[e].D);for(c=0;4>c;++c)m(a.P[c].j);G(a.K);G(a.R);m(a.ba.j);c=a.b;c.c=0;c.Range=-1;for(e=0;5>e;++e)c.c=c.c<<8|p(c.o);a.state=0;a.a=0;a.v=0;a.w=0;a.S=0;a.da=b;a.h=D;a.F=0;c={};c.i=a;c.fa=null;for(c.I=1;H(c););a=Uint8Array;c=d.B;c.length=d.count;return new a(c)}}}();
